!function e(t,a,o){function r(n,s){if(!a[n]){if(!t[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(i)return i(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[n]={exports:{}};t[n][0].call(c.exports,function(e){var a=t[n][1][e];return r(a?a:e)},c,c.exports,e,t,a,o)}return a[n].exports}for(var i="function"==typeof require&&require,n=0;n<o.length;n++)r(o[n]);return r}({1:[function(e,t,a){t.exports={apiURL:"http://localhost:8080/"}},{}],2:[function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=function(){function e(t,a){o(this,e),this.trigger=t,this.target=a,this.bindEvents()}return r(e,[{key:"bindEvents",value:function(){var e=this,t=$(this.trigger),a=$(".overlay");t.each(function(){var t=$(this).data("target"),o=$(t),r=o.find(".formbox__close");r.click(function(e){e.preventDefault(),a.addClass("hide"),o.removeClass("active")}),a.click(function(){a.addClass("hide"),o.removeClass("active")}),$(this).click(function(t){t.preventDefault(),e.closeAll(),a.removeClass("hide"),o.addClass("active")})})}},{key:"closeAll",value:function(){var e=$(".formbox");e.each(function(){$(this).removeClass("active")}),$(".overlay").addClass("hide")}}]),e}();a["default"]=i},{}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o={PLAYER:"player",NPC:"NPC",ENEMY:"enemy",SWORDSMAN:"SwordsMan",MAGE:"Mage",ARCHER:"Archer",ENEMIES:{SLIME:"Slime",MUSHROOM:"Mushroom"},MAPS:{FOREST_TOP_LEFT:"forest_top_left",FOREST_TOP_MIDDLE:"forest_top_middle",FOREST_TOP_RIGHT:"forest_top_right",FOREST_MIDDLE_LEFT:"forest_middle_left",FOREST_MIDDLE_RIGHT:"forest_middle_right",FOREST_BOTTOM_LEFT:"forest_bottom_left",FOREST_BOTTOM_MIDDLE:"forest_bottom_middle",FOREST_BOTTOM_RIGHT:"forest_bottom_right",USELESS_CITY:"useless_city"},DIRECTIONS:{UP:"top",DOWN:"down",LEFT:"left",RIGHT:"right",STOP:"stop"}};a["default"]=o},{}],4:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=e("config"),s=o(n),l=e("./Utils"),u=o(l),c=e("./Boxes"),f=o(c),h=e("../game/StartGame"),p=o(h),d=function(){function e(){r(this,e),this.boxes=new f["default"](".open-formbox",".formbox"),this.formsSelector=".form",this.menuNotLogged=$(".menu--not-logged"),this.loggedMenu=$(".menu--logged"),this.notLoggedText=$(".not-logged--text"),this.loggedText=$(".logged--text"),this.loggedInfo=$(".logged--info"),$(".tooltip").tooltipster({contentAsHTML:!0}),this.bindEvents(),this.checkLogin()}return i(e,[{key:"bindEvents",value:function(){var e=this,t=$(this.formsSelector);t.each(function(){var t=$(this),a=t.data("target"),o=t.find(".formbox__result");t.submit(function(r){var i=u["default"].serializeObject($(this));r.preventDefault(),e.validation(a,t,o)||(e.ajaxPOST(a,o,i),e.cleanForms(t,a,o))})}),$(".logout").click(function(){e.logout()}),$(".character__wrapper").on("click",".character",function(t){var a=$(this).data("character-id");localStorage.setItem("NWarriorCharID",a),e.boxes.closeAll(),$(".content").addClass("hide"),$(".game__wrapper").removeClass("hide"),new p["default"]})}},{key:"validation",value:function(e,t,a){var o=!1;switch(e){case"users":var r=t.find("[name=signupPassword]").val(),i=t.find("[name=signupRepeatPassword]").val();r!=i&&(a.html("The passwords must be equal!"),o=!0);break;case"characters":var n=t.find(".remaining-stats").html(),s=t.find('[name="characterClass"]').val();""===s?(a.html("You must select a character class!"),o=!0):0!=n&&(a.html("You must distribute all attributes!"),o=!0)}return o}},{key:"cleanForms",value:function(e,t){switch(e.find("input[type=text]:not([readonly])").val(""),t){case"characters":e.find(".stats__input").val(5),e.find(".stats__counter").val(10)}}},{key:"ajaxPOST",value:function(e,t,a){var o=this,r=$(".loader"),i=s["default"].apiURL+e;r.addClass("active"),a.token=localStorage.getItem("NWarriorToken"),$.ajax({type:"POST",url:i,data:a,success:function(a){if(r.removeClass("active"),a.failedAuth)return o.logout();switch(e){case"users":o.handleSignUp(a,t);break;case"users/login":o.handleLogin(a,t);break;case"characters":o.handleCharacterCreation(a,t)}},error:function(e,t,a){403==t&&o.logout()}})}},{key:"handleSignUp",value:function(e,t){var a=this;t.html(e.message),e.created&&setTimeout(function(){a.boxes.closeAll(),$('[data-target="#formbox-login"]').click()},500)}},{key:"handleLogin",value:function(e,t){var a=this;t.html(e.message),e.logged&&(setTimeout(function(){a.boxes.closeAll()},500),this.saveSession(e),this.checkLogin())}},{key:"saveSession",value:function(e){localStorage.setItem("NWarriorUserID",e.userId),localStorage.setItem("NWarriorEmail",e.email),localStorage.setItem("NWarriorToken",e.token)}},{key:"checkLogin",value:function(){localStorage.getItem("NWarriorToken")?(this.loggedInfo.find("span").html(localStorage.getItem("NWarriorEmail")),this.loggedMenu.removeClass("hide"),this.loggedText.removeClass("hide"),this.loggedInfo.removeClass("hide"),this.menuNotLogged.addClass("hide"),this.notLoggedText.addClass("hide"),this.setupCharacterCreation(),this.updateCharacterList()):(this.loggedMenu.addClass("hide"),this.loggedText.addClass("hide"),this.loggedInfo.addClass("hide"),this.menuNotLogged.removeClass("hide"),this.notLoggedText.removeClass("hide"))}},{key:"setupCharacterCreation",value:function(){var e=$('[name="form_create"]'),t=e.find('[name="characterClass"]'),a=e.find(".stats__group"),o=e.find(".remaining-stats");$(".formbox__group__character").on("click",function(e){var a=$(e.currentTarget),o=a.data("characterClass");$(".formbox__group__character").removeClass("active"),a.addClass("active"),t.val(o)}),a.each(function(){var e=$(this),t=e.find(".stats__btn--plus"),a=e.find(".stats__btn--minus"),r=e.find(".stats__input");t.click(function(e){e.preventDefault();var t=o.html(),a=r.val();t>0&&(a++,r.val(a),t--,o.html(t))}),a.click(function(e){e.preventDefault();var t=o.html(),a=r.val();t<10&&a>5&&(a--,r.val(a),t++,o.html(t))})}),$("[name=userId]").val(localStorage.getItem("NWarriorUserID"))}},{key:"handleCharacterCreation",value:function(e,t){var a=this;t.html(e.message),setTimeout(function(){a.boxes.closeAll(),$('[data-target="#formbox-select"]').click(),t.html(""),$("[name=characterClass]").val(""),$(".create__img img").attr("src","")},500),this.updateCharacterList()}},{key:"updateCharacterList",value:function(){var e=this,t=$(".loader"),a=localStorage.getItem("NWarriorUserID"),o=s["default"].apiURL+"characters/byUser/"+a,r=$(".character__wrapper");t.addClass("active"),$(".character__wrapper > *").remove(),u["default"].getTemplate("characterSelection",function(a){var i=a,n={};n.token=localStorage.getItem("NWarriorToken"),$.ajax({url:o,type:"get",data:n,success:function(e){if(t.removeClass("active"),e.length)for(var a in e){var o=e[a],n=i;n=n.replace("{CharacterClass}",u["default"].formatClass(o.characterClass)),n=n.replace("{Strength}",o.strength),n=n.replace("{Constitution}",o.constitution),n=n.replace("{Dexterity}",o.dexterity),n=n.replace("{Intelligence}",o.intelligence),n=n.replace("{Charisma}",o.charisma),n=n.replace("{ClassImg}",o.characterClass),r.append('<div class="character" data-character-id="'+o._id+'">'+n+"</div>")}else r.append('<p>No characters found! Press "New Character" to create your first!</p>')},error:function(t,a,o){e.logout()}})})}},{key:"logout",value:function(){localStorage.clear(),location.reload()}}]),e}();a["default"]=d},{"../game/StartGame":9,"./Boxes":2,"./Utils":5,config:1}],5:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=e("../core/Globals"),s=o(n),l=function(){function e(){r(this,e)}return i(e,null,[{key:"formatClass",value:function(e){var t=void 0;switch(e){case 1:t=s["default"].SWORDSMAN;break;case 2:t=s["default"].MAGE;break;case 3:t=s["default"].ARCHER}return t}},{key:"getTemplate",value:function(e,t){$.get("templates/"+e+".html",function(e){t(e)})}},{key:"serializeObject",value:function(e){var t={},a=e.serializeArray();return $.each(a,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}},{key:"humanize",value:function(e){for(var t=e.split("_"),a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].slice(1);return t.join("")}}]),e}();a["default"]=l},{"../core/Globals":3}],6:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=e("../core/Globals"),u=o(l),c=e("config"),f=(o(c),function(e){function t(e,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u["default"].PLAYER,n=arguments[3],s=arguments[4];r(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,s,a.characterClass));return l.anchor.setTo(.5,.5),l.type=o,l.setCharacterInfo(a),l.type===u["default"].PLAYER&&l.bind(),l}return n(t,e),s(t,[{key:"setCharacterInfo",value:function(e){this.characterClass=e.characterClass,this.str=e.strength,this.con=e.constitution,this.dex=e.dexterity,this["int"]=e.intelligence,this.cha=e.charisma,this.HP=e.health,this.currentHP=e.currentHealth,this.MP=e.mana,this.currentMP=e.currentMana,this.frame=0,this.speed=225,this.alive=!0,this.create()}},{key:"bind",value:function(){var e=this;$(window).on("keydown",function(t){var a=t.key;"a"!==a&&"A"!==a||e.attacking||e.attack()}),this.setupAttackEndCallback()}},{key:"create",value:function(){this.game.add.existing(this),this.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.type===u["default"].PLAYER&&this.game.camera.follow(this),this.setupAnimations(),this.type===u["default"].ENEMY&&(this.body.immovable=!0,this.randomWalk())}},{key:"update",value:function(){this.type===u["default"].PLAYER&&(this.handleWalking(),this.updateBars()),this.type===u["default"].ENEMY&&this.playerNear}},{key:"updateBars",value:function(){var e=($(".bar--health .bar__value"),$(".bar--health .bar__text span")),t=($(".bar--mana .bar__value"),$(".bar--mana .bar__text span"));e.html(this.currentHP+"/"+this.HP),t.html(this.currentMP+"/"+this.MP)}},{key:"handleWalking",value:function(){var e=this.speed,t=void 0;t=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)?u["default"].DIRECTIONS.LEFT:this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)?u["default"].DIRECTIONS.RIGHT:this.game.input.keyboard.isDown(Phaser.Keyboard.UP)?u["default"].DIRECTIONS.UP:this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)?u["default"].DIRECTIONS.DOWN:u["default"].DIRECTIONS.STOP,this.attacking?(this.body.velocity.x=0,this.body.velocity.y=0):this.walk(t,e)}},{key:"setupAnimations",value:function(){this.type===u["default"].PLAYER?(this.animations.add("dead",[0,1,2],3,!0),this.animations.add(u["default"].DIRECTIONS.DOWN,[0,1,2],10,!1),this.animations.add(u["default"].DIRECTIONS.RIGHT,[3,4,5],10,!1),this.animations.add(u["default"].DIRECTIONS.UP,[6,7,8],10,!1),this.animations.add(u["default"].DIRECTIONS.LEFT,[9,10,11],10,!1)):this.type===u["default"].ENEMY&&(this.animations.add(u["default"].DIRECTIONS.DOWN,[1,2,3],10,!0),this.animations.add(u["default"].DIRECTIONS.RIGHT,[4,5,6],10,!0),this.animations.add(u["default"].DIRECTIONS.UP,[7,8,9],10,!0),this.animations.add(u["default"].DIRECTIONS.LEFT,[10,11,12],10,!0))}},{key:"turnSprite",value:function(e){var t=void 0;switch(e){case u["default"].DIRECTIONS.UP:t=0;break;case u["default"].DIRECTIONS.RIGHT:t=3;break;case u["default"].DIRECTIONS.DOWN:t=6;break;case u["default"].DIRECTIONS.LEFT:t=9}this.frame=t}},{key:"walk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;switch(e){case u["default"].DIRECTIONS.DOWN:this.lastFrame=0,this.body.velocity.y=t,this.body.velocity.x=0;break;case u["default"].DIRECTIONS.RIGHT:this.lastFrame=3,this.body.velocity.y=0,this.body.velocity.x=t;break;case u["default"].DIRECTIONS.UP:this.lastFrame=6,this.body.velocity.y=-t,this.body.velocity.x=0;break;case u["default"].DIRECTIONS.LEFT:this.lastFrame=9,this.body.velocity.x=-t,this.body.velocity.y=0;break;case u["default"].DIRECTIONS.STOP:this.attacking||(this.body.velocity.x=0,this.body.velocity.y=0,this.frame=this.lastFrame,this.animations.stop())}this.animations.play(e)}},{key:"attack",value:function(){var e=this.lastFrame||0,t=this.getDirection(e),a=this.characterClass+"_attack";this.loadTexture(a),this.anchor.setTo(.5,.5),this.body.width=64,this.body.height=64,this.game.camera.follow(null),this.attacking=!0,this.animations.play(t)}},{key:"getDirection",value:function(e){switch(e){case 0:return u["default"].DIRECTIONS.DOWN;case 3:return u["default"].DIRECTIONS.RIGHT;case 6:return u["default"].DIRECTIONS.UP;case 9:return u["default"].DIRECTIONS.LEFT}}},{key:"setupDeadAnimation",value:function(){var e=this.characterClass+"_dead";this.loadTexture(e),this.anchor.setTo(.5,.5),this.body.width=64,this.body.height=64,this.animations.play("dead")}},{key:"randomWalk",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.randomWalkInterval=setInterval(function(){var a=Math.floor(5*Math.random())+1;if(e.playerNear&&e.findPlayer(),!e.receivingAttack&&!e.playerNear&&e.alive)switch(a){case 1:e.walk(u["default"].DIRECTIONS.DOWN,t);break;case 2:e.walk(u["default"].DIRECTIONS.UP,t);break;case 3:e.walk(u["default"].DIRECTIONS.LEFT,t);break;case 4:e.walk(u["default"].DIRECTIONS.RIGHT,t);break;case 5:e.walk(u["default"].DIRECTIONS.STOP,t)}},800)}},{key:"findPlayer",value:function(){}},{key:"setupAttackEndCallback",value:function(){var e=this;for(var t in this.animations._anims){var a=this.animations._anims[t];a.onComplete.add(function(){e.attacking&&(e.loadTexture(e.characterClass),e.anchor.setTo(.5,.5),e.body.width=32,e.body.height=32,e.game.camera.follow(e),e.attacking=!1)},this)}}},{key:"stepBack",value:function(e){var t=this;switch(this.body.velocity.x=0,this.body.velocity.y=0,e){case u["default"].DIRECTIONS.UP:this.body.velocity.y=-250;break;case u["default"].DIRECTIONS.DOWN:this.body.velocity.y=250;break;case u["default"].DIRECTIONS.LEFT:this.body.velocity.x=-250;break;case u["default"].DIRECTIONS.RIGHT:this.body.velocity.x=250}this.animations.stop(),setTimeout(function(){t.body.velocity.x=0,t.body.velocity.y=0},500)}},{key:"receiveAttack",value:function(e){var t=this,a=e.lastFrame||0,o=this.getDirection(a);this.receivingAttack||(this.receivingAttack=!0,this.currentHP=this.currentHP-2*e.str,this.currentHP<=0?(this.alive=!1,this.type===u["default"].ENEMY?(clearInterval(this.randomWalkInterval),this.body.velocity.x=0,this.body.velocity.y=0):this.type===u["default"].PLAYER&&this.setupDeadAnimation()):this.stepBack(o),setTimeout(function(){t.receivingAttack=!1},300))}},{key:"checkPlayerPosition",value:function(e){var t=e.body.x,a=e.body.y,o=100;(this.body.x<=t-o||this.body.x<=t+o)&&(this.body.y<=a-o||this.body.y<=a+o)?this.playerNear=!0:this.playerNear=!1}}]),t}(Phaser.Sprite));a["default"]=f},{"../core/Globals":3,config:1}],7:[function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=function(){function e(t,a){o(this,e),this.data=t,this.cb=a,this.$dialogWrapper=$(".dialog__wrapper"),this.$dialogText=this.$dialogWrapper.find(".dialog__text"),this.actualLine=1,this.numberOfLines=this.data.lines.length,this.setup(),this.bind()}return r(e,[{key:"setup",value:function(){this.$dialogText.html(this.data.lines[0]),this.$dialogWrapper.removeClass("hide")}},{key:"bind",value:function(){var e=this;this.event=$(document).on("keydown",function(t){var a=t.key;e.actualLine===e.numberOfLines&&e.event.unbind(),"Enter"===a&&e.nextLine()})}},{key:"nextLine",value:function(){this.actualLine===this.numberOfLines?(this.$dialogWrapper.addClass("hide"),this.cb()):(this.actualLine++,this.$dialogText.html(this.data.lines[this.actualLine-1]))}}]),e}();a["default"]=i},{}],8:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=e("../core/Globals"),s=(o(n),e("config")),l=(o(s),e("../core/Utils")),u=(o(l),function(){function e(t,a){r(this,e),this.options=a,this.game=t,this.tilemap=this.game.add.tilemap(this.options.map);var o=this.tilemap.widthInPixels,i=this.tilemap.heightInPixels;this.game.world.setBounds(0,0,o,i),this.tilemap.addTilesetImage("sprites_background_32x32_v3","sprites_background_32x32_v3"),this.groundLayer=this.tilemap.createLayer("Ground"),this.groundOverlapLayer=this.tilemap.createLayer("Ground_overlap"),this.collideLayer=this.tilemap.createLayer("Collide"),this.groundLayer.resizeWorld(),this.groundOverlapLayer.resizeWorld(),this.collideLayer.resizeWorld(),this.tilemap.currentLayer=3,this.tilemap.setCollisionBetween(1,1e4,!0,this.collideLayer)}return i(e,[{key:"renderLastLayer",value:function(){this.passLayer=this.tilemap.createLayer("Pass"),this.passLayer.resizeWorld()}},{key:"addMapTransition",value:function(e,t,a,o,r){this.tilemap.setTileLocationCallback(e,t,a,o,r,this,this.groundLayer)}}]),e}());a["default"]=u},{"../core/Globals":3,"../core/Utils":5,config:1}],9:[function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=e("../states"),s=o(n),l=function(){function e(){var t=this;r(this,e);var a={w:980,h:470};localStorage.getItem("NWarriorToken")||window.location.assign("/"),this.game=new Phaser.Game(a.w,a.h,Phaser.AUTO,"phaser"),Object.keys(s).forEach(function(e){return t.game.state.add(e,s[e])}),this.game.state.start("Boot"),this.uiStyle()}return i(e,[{key:"uiStyle",value:function(){$(".ui-style").each(function(){$(this).append('<div class="ui-style__left-border"></div><div class="ui-style__right-border"></div><div class="ui-style__top-border"></div><div class="ui-style__bottom-border"></div><div class="ui-style__top-left-corner"></div><div class="ui-style__top-right-corner"></div><div class="ui-style__bottom-left-corner"></div><div class="ui-style__bottom-right-corner"></div>')})}}]),e}();a["default"]=l},{"../states":22}],10:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("core/Home"),n=o(i),s=function l(){r(this,l),new n["default"]};$(document).ready(function(){new s})},{"core/Home":4}],11:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=e("../core/Globals"),u=o(l),c=e("../core/Utils"),f=o(c),h=e("config"),p=o(h),d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"preload",value:function(){this.setLoader(),this.game.load.spritesheet("SwordsMan","img/classes/swordman_walk.png",32,32),this.game.load.spritesheet("SwordsMan_attack","img/classes/swordman_attack.png",64,64),this.game.load.spritesheet("SwordsMan_sleep","img/classes/swordman_sleep.png",64,64),this.game.load.spritesheet("SwordsMan_dead","img/classes/swordman_dead.png",64,64),this.game.load.spritesheet("Archer","img/classes/archer_walk.png",32,32),this.game.load.spritesheet("Archer_attack","img/classes/archer_attack.png",64,64),this.game.load.spritesheet("Archer_sleep","img/classes/archer_sleep.png",64,64),this.game.load.spritesheet("Archer_dead","img/classes/archer_dead.png",64,64),this.game.load.spritesheet("Mage","img/classes/mage_walk.png",32,32),this.game.load.spritesheet("Mage_attack","img/classes/mage_attack.png",64,64),this.game.load.spritesheet("Mage_sleep","img/classes/mage_sleep.png",64,64),this.game.load.spritesheet("Mage_dead","img/classes/mage_dead.png",64,64),this.game.load.spritesheet(u["default"].ENEMIES.SLIME,"img/enemies/slime.png",32,32),this.game.load.spritesheet(u["default"].ENEMIES.MUSHROOM,"img/enemies/mushroom.png",32,32),this.game.load.tilemap(u["default"].MAPS.FOREST_TOP_LEFT,"tiles/forest_top_left.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_TOP_MIDDLE,"tiles/forest_top_middle.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_TOP_RIGHT,"tiles/forest_top_right.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_MIDDLE_LEFT,"tiles/forest_middle_left.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_MIDDLE_RIGHT,"tiles/forest_middle_right.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_BOTTOM_LEFT,"tiles/forest_bottom_left.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_BOTTOM_MIDDLE,"tiles/forest_bottom_middle.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_BOTTOM_RIGHT,"tiles/forest_bottom_right.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.USELESS_CITY,"tiles/useless_city.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.image("sprites_background_32x32_v3","tiles/sprites_background_32x32_v3.png")}},{key:"create",value:function(){this.getCharacterInfo()}},{key:"setLoader",value:function(){this.loadingStyle={font:"18px FreePixel",fill:"#fff"},this.loading=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"Loading...",this.loadingStyle),this.loading.anchor.setTo(.5)}},{key:"getCharacterInfo",value:function(){var e=this,t=localStorage.getItem("NWarriorCharID"),a=p["default"].apiURL+"characters/"+t,o={};o.token=localStorage.getItem("NWarriorToken"),$.ajax({type:"get",url:a,data:o,success:function(t){t.characterClass=f["default"].formatClass(t.characterClass);var a=t.lastMap||"ForestBottomMiddle",o={characterData:t,previousMap:!1};e.game.state.start(f["default"].humanize(a),!0,!1,o)}})}}]),t}(Phaser.State);a["default"]=d},{"../core/Globals":3,"../core/Utils":5,config:1}],12:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){this.mapName=c["default"].MAPS.FOREST_BOTTOM_LEFT,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(21,0,18,1,function(){e.changeMap("ForestMiddleLeft",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(39,4,1,35,function(){e.changeMap("ForestBottomMiddle",c["default"].DIRECTIONS.LEFT)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],13:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function g(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=e("../game/Dialog"),d=o(p),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){var a=this;return this.mapName=c["default"].MAPS.FOREST_BOTTOM_MIDDLE,this.welcomeDone||(this.welcome=new d["default"]({lines:["Welcome to <strong>Nameless Warrior Beta</strong>! Forgive me for any bugs (or don't)). (Press ENTER to advance)","Use the Arrow Keys to move your character! (Press ENTER to advance)",'Use the <strong>"A"</strong> key to attack your enemies (Press ENTER to advance)']},function(){a.welcomeDone=!0})),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(39,4,1,35,function(){e.changeMap("ForestBottomRight",c["default"].DIRECTIONS.LEFT)},this),this.map.addMapTransition(0,4,1,35,function(){e.changeMap("ForestBottomLeft",c["default"].DIRECTIONS.RIGHT)},this),this.map.addMapTransition(19,2,2,1,function(){e.changeMap("UselessCity",c["default"].DIRECTIONS.DOWN)},this)}}]),t}(h["default"]);a["default"]=y},{"../core/Globals":3,"../game/Dialog":7,"./MapState":20}],14:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){return this.mapName=c["default"].MAPS.FOREST_BOTTOM_RIGHT,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(1,0,38,1,function(){e.changeMap("ForestMiddleRight",c["default"].DIRECTIONS.DOWN);
},this),this.map.addMapTransition(0,4,1,35,function(){e.changeMap("ForestBottomMiddle",c["default"].DIRECTIONS.RIGHT)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],15:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){this.mapName=c["default"].MAPS.FOREST_MIDDLE_LEFT,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(21,0,18,1,function(){e.changeMap("ForestTopLeft",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(21,39,18,1,function(){e.changeMap("ForestBottomLeft",c["default"].DIRECTIONS.UP)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],16:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){return this.mapName=c["default"].MAPS.FOREST_MIDDLE_RIGHT,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(1,0,38,1,function(){e.changeMap("ForestTopRight",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(1,39,38,1,function(){e.changeMap("ForestBottomRight",c["default"].DIRECTIONS.UP)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],17:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){return this.mapName=c["default"].MAPS.FOREST_TOP_LEFT,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"create",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",this).call(this)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(39,4,1,35,function(){e.changeMap("ForestTopMiddle",c["default"].DIRECTIONS.LEFT)},this),this.map.addMapTransition(21,39,18,1,function(){e.changeMap("ForestMiddleLeft",c["default"].DIRECTIONS.UP)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],18:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function y(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=e("../game/Dialog"),d=(o(p),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){this.mapName=c["default"].MAPS.FOREST_TOP_MIDDLE,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"create",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",this).call(this)}},{key:"getPlayerPosition",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getPlayerPosition",this).call(this)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(39,4,1,35,function(){e.changeMap("ForestTopRight",c["default"].DIRECTIONS.LEFT)},this),this.map.addMapTransition(0,4,1,35,function(){e.changeMap("ForestTopLeft",c["default"].DIRECTIONS.RIGHT)},this)}}]),t}(h["default"]));a["default"]=d},{"../core/Globals":3,"../game/Dialog":7,"./MapState":20}],19:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){return this.mapName=c["default"].MAPS.FOREST_TOP_RIGHT,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(0,4,1,35,function(){e.changeMap("ForestTopMiddle",c["default"].DIRECTIONS.RIGHT)},this),this.map.addMapTransition(1,39,38,1,function(){e.changeMap("ForestMiddleRight",c["default"].DIRECTIONS.UP)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],20:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=e("../core/Globals"),u=o(l),c=e("config"),f=o(c),h=e("../game/Character"),p=o(h),d=e("../game/Map"),y=o(d),g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){this.options=e,this.options.previousMap?this.shouldChangeMap=!1:this.shouldChangeMap=!0,this.playerPositionThreshold=32}},{key:"create",value:function(){this.debug=!1,this.game.time.advancedTiming=!0,this.map=new y["default"](this.game,{map:this.mapName}),this.playerPosition=this.getPlayerPosition(),this.playerFirstPosition=this.playerPosition,this.player=new p["default"](this.game,this.options.characterData,u["default"].PLAYER,this.playerPosition.x,this.playerPosition.y),this.options.previousMap&&this.player.turnSprite(this.playerInitialDirection),this.enemies=[],this.enemies.push(new p["default"](this.game,{characterClass:u["default"].ENEMIES.SLIME,health:70,currentHealth:70},u["default"].ENEMY,450,450)),this.enemies.push(new p["default"](this.game,{characterClass:u["default"].ENEMIES.MUSHROOM,health:70,currentHealth:70},u["default"].ENEMY,150,150)),this.map.renderLastLayer(),this.addMapTransitions(),this.bind()}},{key:"update",value:function(){if(this.game.physics.arcade.collide(this.player,this.enemies,this.collisionHandler),this.options.previousMap&&this.checkShouldChangeMap(),this.player&&(this.game.physics.arcade.collide(this.player,this.map.collideLayer),this.game.physics.arcade.collide(this.player,this.map.groundLayer)),this.enemies)for(var e in this.enemies)this.enemies[e].alive&&(this.game.physics.arcade.collide(this.enemies[e],this.map.collideLayer),this.enemies[e].checkPlayerPosition(this.player))}},{key:"render",value:function(){if(this.debug&&(this.game.debug.text(this.game.time.fps||"--",10,20,"#fff"),this.player&&this.debug&&(this.game.debug.bodyInfo(this.player,32,32),this.game.debug.body(this.player)),this.enemies&&this.debug))for(var e in this.enemies){var t=this.enemies[e];this.game.debug.body(t)}}},{key:"getPlayerPosition",value:function(){if(!this.options.previousMap)return 0!==this.options.characterData.lastPositionX?{x:this.options.characterData.lastPositionX-32,y:this.options.characterData.lastPositionY}:{x:300,y:300};var e=0;switch(this.options.firstPositionThreshold&&(e+=this.options.firstPositionThreshold),this.options.enterPosition){case u["default"].DIRECTIONS.UP:return this.playerInitialDirection=u["default"].DIRECTIONS.UP,{x:this.options.playerLastPosition.x+16,y:e};case u["default"].DIRECTIONS.DOWN:return this.playerInitialDirection=u["default"].DIRECTIONS.DOWN,{x:this.options.playerLastPosition.x+16,y:this.map.tilemap.heightInPixels-32+e};case u["default"].DIRECTIONS.LEFT:return this.playerInitialDirection=u["default"].DIRECTIONS.RIGHT,{x:e,y:this.options.playerLastPosition.y+16};case u["default"].DIRECTIONS.RIGHT:return this.playerInitialDirection=u["default"].DIRECTIONS.LEFT,{x:this.map.tilemap.widthInPixels-32+e,y:this.options.playerLastPosition.y+16}}}},{key:"collisionHandler",value:function(e,t){e.attacking&&t.receiveAttack(e)}},{key:"bind",value:function(){var e=this;$("[name=debug-mode]").change(function(t){var a=$(t.currentTarget);a.is(":checked")?e.debug=!0:e.debug=!1}),setTimeout(function(){e.saveCharacterPosition()},5e3)}},{key:"checkShouldChangeMap",value:function(){var e={x:this.player.body.x,y:this.player.body.y};switch(this.options.enterPosition){case u["default"].DIRECTIONS.UP:this.playerFirstPosition.y+this.playerPositionThreshold<=e.y&&(this.shouldChangeMap=!0);break;case u["default"].DIRECTIONS.DOWN:this.playerFirstPosition.y-this.playerPositionThreshold>=e.y&&(this.shouldChangeMap=!0);break;case u["default"].DIRECTIONS.LEFT:this.playerFirstPosition.x+this.playerPositionThreshold<=e.x&&(this.shouldChangeMap=!0);break;case u["default"].DIRECTIONS.RIGHT:this.playerFirstPosition.x-this.playerPositionThreshold>=e.x&&(this.shouldChangeMap=!0)}}},{key:"addMapTransitions",value:function(){this.willChangeMap=!1}},{key:"changeMap",value:function(e,t,a){var o=this;if(this.shouldChangeMap){var r={x:this.player.body.x,y:this.player.body.y};this.willChangeMap||!function(){o.willChangeMap=!0;var i={characterData:o.options.characterData,previousMap:o.mapName,enterPosition:t,playerLastPosition:r,firstPositionThreshold:a};setTimeout(function(){o.game.state.start(e,!0,!1,i)},100)}()}}},{key:"saveCharacterPosition",value:function(){var e=localStorage.getItem("NWarriorCharID"),t=f["default"].apiURL+"characters/updateLocation/"+e,a={lastPositionX:this.player.body.x,lastPositionY:this.player.body.y,lastMap:this.mapName,token:localStorage.getItem("NWarriorToken")};$.ajax({type:"put",url:t,data:a,success:function(e){console.log(e)}})}}]),t}(Phaser.State);a["default"]=g},{"../core/Globals":3,"../game/Character":6,"../game/Map":8,config:1}],21:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function d(e,t,a){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,a)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(a)},u=e("../core/Globals"),c=o(u),f=e("./MapState"),h=o(f),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e){this.mapName=c["default"].MAPS.USELESS_CITY,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"addMapTransitions",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(18,39,4,1,function(){e.changeMap("ForestBottomMiddle",c["default"].DIRECTIONS.UP,96)},this)}}]),t}(h["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":20}],22:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./Boot");Object.defineProperty(a,"Boot",{enumerable:!0,get:function(){return o(r)["default"]}});var i=e("./ForestTopLeft");Object.defineProperty(a,"ForestTopLeft",{enumerable:!0,get:function(){return o(i)["default"]}});var n=e("./ForestTopMiddle");Object.defineProperty(a,"ForestTopMiddle",{enumerable:!0,get:function(){return o(n)["default"]}});var s=e("./ForestTopRight");Object.defineProperty(a,"ForestTopRight",{enumerable:!0,get:function(){return o(s)["default"]}});var l=e("./ForestMiddleLeft");Object.defineProperty(a,"ForestMiddleLeft",{enumerable:!0,get:function(){return o(l)["default"]}});var u=e("./ForestMiddleRight");Object.defineProperty(a,"ForestMiddleRight",{enumerable:!0,get:function(){return o(u)["default"]}});var c=e("./ForestBottomLeft");Object.defineProperty(a,"ForestBottomLeft",{enumerable:!0,get:function(){return o(c)["default"]}});var f=e("./ForestBottomMiddle");Object.defineProperty(a,"ForestBottomMiddle",{enumerable:!0,get:function(){return o(f)["default"]}});var h=e("./ForestBottomRight");Object.defineProperty(a,"ForestBottomRight",{enumerable:!0,get:function(){return o(h)["default"]}});var p=e("./UselessCity");Object.defineProperty(a,"UselessCity",{enumerable:!0,get:function(){return o(p)["default"]}})},{"./Boot":11,"./ForestBottomLeft":12,"./ForestBottomMiddle":13,"./ForestBottomRight":14,"./ForestMiddleLeft":15,"./ForestMiddleRight":16,"./ForestTopLeft":17,"./ForestTopMiddle":18,"./ForestTopRight":19,"./UselessCity":21}]},{},[10]);