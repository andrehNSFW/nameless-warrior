!function t(e,a,i){function r(n,s){if(!a[n]){if(!e[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(o)return o(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[n]={exports:{}};e[n][0].call(c.exports,function(t){var a=e[n][1][t];return r(a?a:t)},c,c.exports,t,e,a,i)}return a[n].exports}for(var o="function"==typeof require&&require,n=0;n<i.length;n++)r(i[n]);return r}({1:[function(t,e,a){e.exports={apiURL:"http://localhost:8080/"}},{}],2:[function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),o=function(){function t(e,a){i(this,t),this.trigger=e,this.target=a,this.bindEvents()}return r(t,[{key:"bindEvents",value:function(){var t=this,e=$(this.trigger),a=$(".overlay");e.each(function(){var e=$(this).data("target"),i=$(e),r=i.find(".formbox__close");r.click(function(t){t.preventDefault(),a.addClass("hide"),i.removeClass("active")}),a.click(function(){a.addClass("hide"),i.removeClass("active")}),$(this).click(function(e){e.preventDefault(),t.closeAll(),a.removeClass("hide"),i.addClass("active")})})}},{key:"closeAll",value:function(){var t=$(".formbox");t.each(function(){$(this).removeClass("active")}),$(".overlay").addClass("hide")}}]),t}();a["default"]=o},{}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={PLAYER:"player",NPC:"NPC",ENEMY:"enemy",SWORDSMAN:"SwordsMan",MAGE:"Mage",ARCHER:"Archer",ENEMIES:{SLIME:"Slime",MUSHROOM:"Mushroom"},MAPS:{FOREST_TOP_LEFT:"forest_top_left",FOREST_TOP_MIDDLE:"forest_top_middle",FOREST_TOP_RIGHT:"forest_top_right",FOREST_MIDDLE_LEFT:"forest_middle_left",FOREST_MIDDLE_RIGHT:"forest_middle_right",FOREST_BOTTOM_LEFT:"forest_bottom_left",FOREST_BOTTOM_MIDDLE:"forest_bottom_middle",FOREST_BOTTOM_RIGHT:"forest_bottom_right",USELESS_CITY:"useless_city",HOUSE_01:"house_01",HOUSE_02:"house_02"},MUSICS:{SAD_TOWN:"SadTown",SAD_DESCENT:"SadDescent"},DIRECTIONS:{UP:"top",DOWN:"down",LEFT:"left",RIGHT:"right",STOP:"stop"},TEXT_STYLES:{DAMAGE:{font:"14px FreePixel",fontWeight:"Bold",fill:"#000",wordWrap:!0,wordWrapWidth:32,align:"center"},DEAD:{font:"20px FreePixel",fontWeight:"Bold",fill:"#fff",align:"center"},LOADING:{font:"18px FreePixel",fill:"#fff"}},KEY_CODES:{ENTER:13,A:65}};a["default"]=i},{}],4:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=t("config"),s=i(n),l=t("./Utils"),u=i(l),c=t("./Boxes"),h=i(c),f=t("../game/StartGame"),p=i(f),d=function(){function t(){r(this,t),this.boxes=new h["default"](".open-formbox",".formbox"),this.formsSelector=".form",this.isChrome=u["default"].isChrome(),this.menuNotLogged=$(".menu--not-logged"),this.loggedMenu=$(".menu--logged"),this.notLoggedText=$(".not-logged--text"),this.loggedText=$(".logged--text"),this.loggedInfo=$(".logged--info"),$(".tooltip").tooltipster({contentAsHTML:!0}),this.bindEvents(),this.checkLogin(),this.isChrome||$(".footer").removeClass("hide")}return o(t,[{key:"bindEvents",value:function(){var t=this,e=$(this.formsSelector);e.each(function(){var e=$(this),a=e.data("target"),i=e.find(".formbox__result");e.submit(function(r){var o=u["default"].serializeObject($(this));r.preventDefault(),t.validation(a,e,i)||(t.ajaxPOST(a,i,o),t.cleanForms(e,a,i))})}),$(".logout").click(function(){t.logout()}),$(".character__wrapper").on("click",".character",function(e){var a=$(this).data("character-id");localStorage.setItem("NWarriorCharID",a),t.boxes.closeAll(),$(".content").addClass("hide"),$(".game__wrapper").removeClass("hide"),new p["default"]})}},{key:"validation",value:function(t,e,a){var i=!1;switch(t){case"users":var r=e.find("[name=signupPassword]").val(),o=e.find("[name=signupRepeatPassword]").val();r!=o&&(a.html("The passwords must be equal!"),i=!0);break;case"characters":var n=e.find(".remaining-stats").html(),s=e.find('[name="characterClass"]').val();""===s?(a.html("You must select a character class!"),i=!0):0!=n&&(a.html("You must distribute all attributes!"),i=!0)}return i}},{key:"cleanForms",value:function(t,e){switch(t.find("input[type=text]:not([readonly])").val(""),e){case"characters":t.find(".stats__input").val(5),t.find(".stats__counter").val(10),t.find(".formbox__group__character").addClass("active"),t.find("[name=characterClass]").val("")}}},{key:"ajaxPOST",value:function(t,e,a){var i=this,r=$(".loader"),o=s["default"].apiURL+t;r.addClass("active"),a.token=localStorage.getItem("NWarriorToken"),$.ajax({type:"POST",url:o,data:a,success:function(a){if(r.removeClass("active"),a.failedAuth)return i.logout();switch(t){case"users":i.handleSignUp(a,e);break;case"users/login":i.handleLogin(a,e);break;case"characters":i.handleCharacterCreation(a,e)}},error:function(t,e,a){403==e&&i.logout()}})}},{key:"handleSignUp",value:function(t,e){var a=this;e.html(t.message),t.created&&setTimeout(function(){a.boxes.closeAll(),$('[data-target="#formbox-login"]').click()},500)}},{key:"handleLogin",value:function(t,e){var a=this;e.html(t.message),t.logged&&(setTimeout(function(){a.boxes.closeAll()},500),this.saveSession(t),this.checkLogin())}},{key:"saveSession",value:function(t){localStorage.setItem("NWarriorUserID",t.userId),localStorage.setItem("NWarriorEmail",t.email),localStorage.setItem("NWarriorToken",t.token)}},{key:"checkLogin",value:function(){localStorage.getItem("NWarriorToken")?(this.loggedInfo.find("span").html(localStorage.getItem("NWarriorEmail")),this.loggedMenu.removeClass("hide"),this.loggedText.removeClass("hide"),this.loggedInfo.removeClass("hide"),this.menuNotLogged.addClass("hide"),this.notLoggedText.addClass("hide"),this.setupCharacterCreation(),this.updateCharacterList()):(this.loggedMenu.addClass("hide"),this.loggedText.addClass("hide"),this.loggedInfo.addClass("hide"),this.menuNotLogged.removeClass("hide"),this.notLoggedText.removeClass("hide"))}},{key:"setupCharacterCreation",value:function(){var t=$('[name="form_create"]'),e=t.find('[name="characterClass"]'),a=t.find(".stats__group"),i=t.find(".remaining-stats");$(".formbox__group__character").on("click",function(t){var a=$(t.currentTarget),i=a.data("characterClass");$(".formbox__group__character").removeClass("active"),a.addClass("active"),e.val(i)}),a.each(function(){var t=$(this),e=t.find(".stats__btn--plus"),a=t.find(".stats__btn--minus"),r=t.find(".stats__input");e.click(function(t){t.preventDefault();var e=i.html(),a=r.val();e>0&&(a++,r.val(a),e--,i.html(e))}),a.click(function(t){t.preventDefault();var e=i.html(),a=r.val();e<10&&a>5&&(a--,r.val(a),e++,i.html(e))})}),$("[name=userId]").val(localStorage.getItem("NWarriorUserID"))}},{key:"handleCharacterCreation",value:function(t,e){var a=this;e.html(t.message),setTimeout(function(){a.boxes.closeAll(),$('[data-target="#formbox-select"]').click(),e.html(""),$(".remaining-stats").html(10)},500),this.updateCharacterList()}},{key:"updateCharacterList",value:function(){var t=this,e=$(".loader"),a=localStorage.getItem("NWarriorUserID"),i=s["default"].apiURL+"characters/byUser/"+a,r=$(".character__wrapper");e.addClass("active"),$(".character__wrapper > *").remove(),u["default"].getTemplate("characterSelection",function(a){var o=a,n={};n.token=localStorage.getItem("NWarriorToken"),$.ajax({url:i,type:"get",data:n,success:function(t){if(e.removeClass("active"),t.length)for(var a in t){var i=t[a],n=o;n=n.replace("{LastSaved}",u["default"].formatDate(i.updatedAt)),n=n.replace("{CharacterClass}",u["default"].formatClass(i.characterClass)),n=n.replace("{Strength}",i.strength),n=n.replace("{Constitution}",i.constitution),n=n.replace("{Dexterity}",i.dexterity),n=n.replace("{Intelligence}",i.intelligence),n=n.replace("{Charisma}",i.charisma),n=n.replace("{ClassImg}",i.characterClass),r.append('<div class="character" data-character-id="'+i._id+'">'+n+"</div>")}else r.append('<p>No characters found! Press "New Character" to create your first!</p>')},error:function(e,a,i){t.logout()}})})}},{key:"logout",value:function(){localStorage.clear(),location.reload()}}]),t}();a["default"]=d},{"../game/StartGame":9,"./Boxes":2,"./Utils":5,config:1}],5:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=t("../core/Globals"),s=i(n),l=function(){function t(){r(this,t)}return o(t,null,[{key:"formatClass",value:function(t){var e=void 0;switch(t){case 1:e=s["default"].SWORDSMAN;break;case 2:e=s["default"].MAGE;break;case 3:e=s["default"].ARCHER}return e}},{key:"getTemplate",value:function(t,e){$.get("templates/"+t+".html",function(t){e(t)})}},{key:"serializeObject",value:function(t){var e={},a=t.serializeArray();return $.each(a,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}},{key:"humanize",value:function(t){for(var e=t.split("_"),a=0;a<e.length;a++)e[a]=e[a].charAt(0).toUpperCase()+e[a].slice(1);return e.join("")}},{key:"formatDate",value:function(t){var e=new Date(t),a=e.getDate(),i=e.getMonth()+1,r=e.getFullYear(),o=e.getHours(),n=e.getMinutes();return i+"-"+a+"-"+r+" "+o+":"+n}},{key:"addZero",value:function(t){return("0"+Number(t).toFixed(0)).slice(-2)}},{key:"isChrome",value:function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}}]),t}();a["default"]=l},{"../core/Globals":3}],6:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=t("../core/Globals"),u=i(l),c=t("config"),h=i(c),f=t("../core/Utils"),p=i(f),d=function(t){function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u["default"].PLAYER,n=arguments[3],s=arguments[4],l=arguments[5];r(this,e);var c=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,s,a.characterClass));return c.anchor.setTo(.5,.5),c.map=l,c.mapBorderThreshold=100,c.lastDirection=u["default"].DIRECTIONS.DOWN,c.textY=12,c.type=i,c.frame=0,c.alive=!0,c.playerNear=!1,c.setCharacterInfo(a),c.characterClass===u["default"].ARCHER&&(c.arrows=[]),c}return n(e,t),s(e,[{key:"setCharacterInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t||this,this.classNumber=t.classNumber,this.characterClass=t.characterClass,this.strength=t.strength,this.strengthXP=t.strengthXP,this.constitution=t.constitution,this.constitutionXP=t.constitutionXP,this.dexterity=t.dexterity,this.dexterityXP=t.dexterityXP,this.intelligence=t.intelligence,this.intelligenceXP=t.intelligenceXP,this.charisma=t.charisma,this.charismaXP=t.charismaXP,this.firstDialog=t.firstDialog,this.gameTimeHours=t.gameTimeHours,this.gameTimeMinutes=t.gameTimeMinutes,this.health=t.health,this.currentHealth=t.currentHealth,this.mana=t.mana,this.currentMana=t.currentMana,this.isHostile=t.isHostile,this.updatedAt=t.updatedAt,this.speed=220+2*this.dexterity,e||this.create(),this.type===u["default"].PLAYER&&this.updateCharacterStatusFormbox()}},{key:"bind",value:function(){var t=this;this.map.isCity||($(window).on("keydown",function(e){var a=e.keyCode;a===u["default"].KEY_CODES.A&&(t.attacking||t.attack())}),this.setupAttackEndCallback())}},{key:"create",value:function(){this.game.add.existing(this),this.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.type===u["default"].PLAYER&&this.game.camera.follow(this),this.setupAnimations(),this.type===u["default"].ENEMY&&(this.body.immovable=!0,this.randomWalk()),this.type===u["default"].PLAYER&&this.bind()}},{key:"update",value:function(){var t=this;this.type===u["default"].PLAYER&&(this.healing||this.currentHealth===this.health||!this.alive||this.inCombat||(this.currentHealth++,this.healing=!0,setTimeout(function(){t.healing=!1},1e3)),this.alive?(this.handleWalking(),this.arrows&&this.handleArrows()):(this.animations.play("dead"),this.body.velocity.x=0,this.body.velocity.y=0),this.updateBars()),this.text&&this.body&&this.alive&&(this.textY-=1,this.text.x=Math.floor(this.body.x+this.body.width/2),this.text.y=Math.floor(this.body.y+this.body.height/2+this.textY))}},{key:"updateBars",value:function(){var t=$(".bar--health .bar__value"),e=$(".bar--health .bar__text span"),a=($(".bar--mana .bar__value"),$(".bar--mana .bar__text span")),i=this.currentHealth/(100*this.health)*1e4;i=i.toFixed(0)+"%",t.css("width",i),e.html(this.currentHealth+"/"+this.health),a.html(this.currentMana+"/"+this.mana)}},{key:"handleWalking",value:function(){var t=this.speed,e=void 0;return this.attacking?(this.body.velocity.x=0,void(this.body.velocity.y=0)):(e=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)?u["default"].DIRECTIONS.LEFT:this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)?u["default"].DIRECTIONS.RIGHT:this.game.input.keyboard.isDown(Phaser.Keyboard.UP)?u["default"].DIRECTIONS.UP:this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)?u["default"].DIRECTIONS.DOWN:u["default"].DIRECTIONS.STOP,void(this.receivingAttack||this.walk(e,t)))}},{key:"handleArrows",value:function(){var t=this,e=1.25*this.dexterity;this.arrows.forEach(function(a){if(!a.destroyed){switch(a.direction){case u["default"].DIRECTIONS.UP:a.object.y-=e;break;case u["default"].DIRECTIONS.DOWN:a.object.y+=e;break;case u["default"].DIRECTIONS.LEFT:a.object.x-=e;break;case u["default"].DIRECTIONS.RIGHT:a.object.x+=e}(a.object.y<=0||a.object.y>=t.map.width||a.object.x<=0||a.object.x>=t.map.height)&&(a.object.destroy(),a.destroyed=!0,a=null)}})}},{key:"setupAnimations",value:function(){this.type===u["default"].PLAYER?(this.animations.add("dead",[0,1,2],3,!0),this.animations.add(u["default"].DIRECTIONS.DOWN,[0,1,2],10,!1),this.animations.add(u["default"].DIRECTIONS.RIGHT,[3,4,5],10,!1),this.animations.add(u["default"].DIRECTIONS.UP,[6,7,8],10,!1),this.animations.add(u["default"].DIRECTIONS.LEFT,[9,10,11],10,!1)):this.type===u["default"].ENEMY&&(this.animations.add(u["default"].DIRECTIONS.DOWN,[0,1,2],10,!0),this.animations.add(u["default"].DIRECTIONS.RIGHT,[3,4,5],10,!0),this.animations.add(u["default"].DIRECTIONS.UP,[6,7,8],10,!0),this.animations.add(u["default"].DIRECTIONS.LEFT,[9,10,11],10,!0))}},{key:"turnSprite",value:function(t){var e=void 0;switch(t){case u["default"].DIRECTIONS.UP:e=0;break;case u["default"].DIRECTIONS.RIGHT:e=3;break;case u["default"].DIRECTIONS.DOWN:e=6;break;case u["default"].DIRECTIONS.LEFT:e=9}this.frame=e}},{key:"walk",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;switch(t){case u["default"].DIRECTIONS.DOWN:this.lastFrame=0,this.lastDirection=u["default"].DIRECTIONS.DOWN,this.body.velocity.y=e,this.body.velocity.x=0;break;case u["default"].DIRECTIONS.RIGHT:this.lastFrame=3,this.lastDirection=u["default"].DIRECTIONS.RIGHT,this.body.velocity.y=0,this.body.velocity.x=e;break;case u["default"].DIRECTIONS.UP:this.lastFrame=6,this.lastDirection=u["default"].DIRECTIONS.UP,this.body.velocity.y=-e,this.body.velocity.x=0;break;case u["default"].DIRECTIONS.LEFT:this.lastFrame=9,this.lastDirection=u["default"].DIRECTIONS.LEFT,this.body.velocity.x=-e,this.body.velocity.y=0;break;case u["default"].DIRECTIONS.STOP:this.attacking||(this.body.velocity.x=0,this.body.velocity.y=0,this.frame=this.lastFrame,this.animations.stop())}this.animations.play(t)}},{key:"attack",value:function(){var t=this,e=this.lastFrame||0,a=this.getDirection(e),i=this.characterClass+"_attack";this.loadTexture(i),this.anchor.setTo(.5,.5),this.body.width=64,this.body.height=64,this.game.camera.follow(null),this.attacking=!0,this.animations.play(a),this.characterClass===u["default"].ARCHER&&setTimeout(function(){t.throwArrow()},150)}},{key:"throwArrow",value:function(){var t=void 0,e=this.body.x,a=this.body.y;switch(this.lastDirection){case u["default"].DIRECTIONS.UP:t=0,a+=14,e+=28;break;case u["default"].DIRECTIONS.DOWN:t=-180,a+=64,e+=38;break;case u["default"].DIRECTIONS.LEFT:t=-90,a+=44;break;case u["default"].DIRECTIONS.RIGHT:t=90,a+=34,e+=64}var i=this.game.add.sprite(e,a,"arrow");i.angle=t,this.game.physics.arcade.enable(i),this.arrows.push({object:i,direction:this.lastDirection})}},{key:"getDirection",value:function(t){switch(t){case 0:return u["default"].DIRECTIONS.DOWN;case 3:return u["default"].DIRECTIONS.RIGHT;case 6:return u["default"].DIRECTIONS.UP;case 9:return u["default"].DIRECTIONS.LEFT}}},{key:"setupDeadAnimation",value:function(){var t=this.characterClass+"_dead";this.attacking=!1,this.receivingAttack=!1,this.loadTexture(t),this.anchor.setTo(.5,.5),this.body.width=64,this.body.height=64,this.animations.play("dead")}},{key:"checkMapBorderProximity",value:function(){var t={x:this.body.x,y:this.body.y},e={x:this.map.width,y:this.map.height};return t.x>=e.x-this.mapBorderThreshold?u["default"].DIRECTIONS.LEFT:t.x<=this.mapBorderThreshold?u["default"].DIRECTIONS.RIGHT:t.y<=e.y-this.mapBorderThreshold?u["default"].DIRECTIONS.UP:t.y<=this.mapBorderThreshold&&u["default"].DIRECTIONS.DOWN}},{key:"randomWalk",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,a=Math.floor(200*Math.random())+600;this.randomWalkInterval=setInterval(function(){var a=Math.floor(5*Math.random())+1,i=t.checkMapBorderProximity();if(t.randomWalkActive=!0,!t.attacking){if(t.playerNear&&t.playerDirection)return void t.walk(t.playerDirection,1.5*e);if(i)return void t.walk(i,e);if(!t.receivingAttack&&t.alive)switch(a){case 1:t.walk(u["default"].DIRECTIONS.DOWN,e);break;case 2:t.walk(u["default"].DIRECTIONS.UP,e);break;case 3:t.walk(u["default"].DIRECTIONS.LEFT,e);break;case 4:t.walk(u["default"].DIRECTIONS.RIGHT,e);break;case 5:t.walk(u["default"].DIRECTIONS.STOP,e)}}},a)}},{key:"setupAttackEndCallback",value:function(){var t=this;for(var e in this.animations._anims){var a=this.animations._anims[e];a.onComplete.add(function(){t.attacking&&(t.loadTexture(t.characterClass),t.anchor.setTo(.5,.5),t.body.width=32,t.body.height=32,t.game.camera.follow(t),t.attacking=!1)},this)}}},{key:"stepBack",value:function(t){var e=this;if(this.type!==u["default"].PLAYER||!this.attacking){var a=this.type===u["default"].PLAYER?150:200;switch(this.body.velocity.x=0,this.body.velocity.y=0,t){case u["default"].DIRECTIONS.UP:this.body.velocity.y=-250;break;case u["default"].DIRECTIONS.DOWN:this.body.velocity.y=250;break;case u["default"].DIRECTIONS.LEFT:this.body.velocity.x=-250;break;case u["default"].DIRECTIONS.RIGHT:this.body.velocity.x=250}this.animations.stop(),setTimeout(function(){e.body.velocity.x=0,e.body.velocity.y=0},a)}}},{key:"receiveAttack",value:function(t){var e=this,a=t.lastFrame||0,i=this.getDirection(a),r=0;if(!this.receivingAttack){this.receivingAttack=!0;var o=t.type===u["default"].PLAYER?t.dexterity/5:0,n=Math.floor(9*Math.random())+1,s=Math.floor(6*Math.random())+1-o;t.characterClass===u["default"].SWORDSMAN||t.type===u["default"].ENEMY?r=2*t.strength+n:t.characterClass===u["default"].ARCHER&&(r=1.25*t.dexterity+n),this.textY=12,s>4?(this.text?this.text.text="miss":(this.text=this.game.add.text(0,0,"miss",u["default"].TEXT_STYLES.DAMAGE),this.text.anchor.set(.5)),this.type===u["default"].PLAYER&&(this.dexterityXP+=.05,this.dexterityXP>=100&&(this.dexterity++,this.dexterityXP=0))):(this.currentHealth=this.currentHealth-r,t.characterClass===u["default"].ARCHER?(t.dexterityXP+=.05,t.dexterityXP>=100&&(t.dexterity++,t.dexterityXP=0)):t.characterClass===u["default"].ARCHER&&(t.strengthXP+=.05,t.strengthXP>=100&&(t.strength++,t.strengthXP=0)),this.text?this.currentHealth<=0?this.text.text="dead!":this.text.text=r:(this.text=this.game.add.text(0,0,r,u["default"].TEXT_STYLES.DAMAGE),this.text.anchor.set(.5)),this.checkDeath(),this.alive&&this.stepBack(i)),t.type===u["default"].ENEMY&&setTimeout(function(){t.attacking=!1},800),setTimeout(function(){e.text.text=""},500),setTimeout(function(){e.receivingAttack=!1},300)}}},{key:"checkDeath",value:function(){this.currentHealth<=0&&(this.alive=!1,this.currentHealth<0&&(this.currentHealth=0),this.type===u["default"].ENEMY?(clearInterval(this.randomWalkInterval),this.body.velocity.x=0,this.body.velocity.y=0,this.body.destroy(),this.kill()):this.type===u["default"].PLAYER&&this.setupDeadAnimation())}},{key:"getOppositeDirectionFrame",value:function(t){switch(t){case 0:return 6;case 3:return 9;case 6:return 0;case 9:return 3}}},{key:"checkProximity",value:function(t,e,a,i){var r=t.body.x,o=t.body.y,n=e.body.x,s=e.body.y,l=void 0,c=void 0,h=void 0,f=void 0;return r>=n-a&&r<=n+a&&o>=s-a&&o<=s+a&&(i?(o<=s-a&&o<s?(l=u["default"].DIRECTIONS.DOWN,c=s-o):o>=s-a&&o>s&&(l=u["default"].DIRECTIONS.UP,c=o-s),r>=n-a&&r<n?(h=u["default"].DIRECTIONS.RIGHT,f=n-r):r<=n+a&&r>n&&(h=u["default"].DIRECTIONS.LEFT,f=r-n),c>f?this.playerDirection=l:this.playerDirection=h):this.playerDirection=null,!0)}},{key:"checkPlayerPosition",value:function(t){var e=32,a=t.characterClass===u["default"].ARCHER?260:160;this.playerNear=this.checkProximity(this,t,a,this.isHostile);var i=this.checkProximity(this,t,e);i&&(this.lastFrame=this.getOppositeDirectionFrame(t.lastFrame),this.frame=this.lastFrame,this.animations.stop(),!this.attacking&&t.alive&&(this.attacking=!0,t.receiveAttack(this)))}},{key:"saveCharacterStatus",value:function(t){var e=localStorage.getItem("NWarriorCharID"),a=h["default"].apiURL+"characters/updateCharacter/"+e,i={strength:this.strength,strengthXP:this.strengthXP,constitution:this.constitution,constitutionXP:this.constitutionXP,dexterity:this.dexterity,dexterityXP:this.dexterityXP,intelligence:this.intelligence,intelligenceXP:this.intelligenceXP,charisma:this.charisma,charismaXP:this.charismaXP,health:this.health,currentHealth:this.currentHealth,mana:this.mana,currentMana:this.currentMana,lastPositionX:this.body.x,lastPositionY:this.body.y,lastMap:t,firstDialog:this.firstDialog,gameTimeHours:this.gameTimeHours,gameTimeMinutes:this.gameTimeMinutes,token:localStorage.getItem("NWarriorToken")};$.ajax({type:"put",url:a,data:i,success:function(t){console.log("Character Saved!")}})}},{key:"updateCharacterStatusFormbox",value:function(){var t=this,e=$(".character-status__wrapper");e.html(""),p["default"].getTemplate("characterStatus",function(a){a=a.replace("{CharacterClass}",t.characterClass),a=a.replace("{LastSaved}",p["default"].formatDate(t.updatedAt)),a=a.replace("{Health}",t.health),a=a.replace("{CurrentHealth}",t.currentHealth),a=a.replace("{Mana}",t.mana),a=a.replace("{CurrentMana}",t.currentMana),a=a.replace("{Strength}",t.strength),a=a.replace("{StrengthXP}",t.strengthXP),a=a.replace("{Constitution}",t.constitution),a=a.replace("{ConstitutionXP}",t.constitutionXP),a=a.replace("{Dexterity}",t.dexterity),a=a.replace("{DexterityXP}",t.dexterityXP),a=a.replace("{Intelligence}",t.intelligence),a=a.replace("{IntelligenceXP}",t.intelligenceXP),a=a.replace("{Charisma}",t.charisma),a=a.replace("{CharismaXP}",t.charismaXP),a=a.replace("{ClassImg}",t.classNumber),e.append(a)})}}]),e}(Phaser.Sprite);a["default"]=d},{"../core/Globals":3,"../core/Utils":5,config:1}],7:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=t("../core/Globals"),s=i(n),l=function(){function t(e,a){r(this,t),this.data=e,this.cb=a,this.$dialogWrapper=$(".dialog__wrapper"),this.$dialogText=this.$dialogWrapper.find(".dialog__text"),this.currentLine=1,this.numberOfLines=this.data.lines.length,this.setup(),this.bind()}return o(t,[{key:"setup",value:function(){this.$dialogText.html(this.data.lines[0]),this.$dialogWrapper.removeClass("hide")}},{key:"bind",value:function(){var t=this;this.event=$(document).on("keydown",function(e){var a=e.keyCode;a===s["default"].KEY_CODES.ENTER&&t.nextLine(),t.currentLine>t.numberOfLines&&t.event.unbind()})}},{key:"nextLine",value:function(){this.currentLine===this.numberOfLines?(this.$dialogWrapper.addClass("hide"),this.cb()):(this.currentLine++,this.$dialogText.html(this.data.lines[this.currentLine-1]))}}]),t}();a["default"]=l},{"../core/Globals":3}],8:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=t("../core/Globals"),s=(i(n),t("config")),l=(i(s),t("../core/Utils")),u=(i(l),function(){function t(e,a){r(this,t),this.options=a,this.isCity=a.isCity,this.isHouse=a.isHouse,this.game=e,this.tilemap=this.game.add.tilemap(this.options.map);var i=this.tilemap.widthInPixels,o=this.tilemap.heightInPixels;this.game.world.setBounds(0,0,i,o),this.tilemap.addTilesetImage("sprites_background_32x32_v3","sprites_background_32x32_v3"),this.groundLayer=this.tilemap.createLayer("Ground"),this.groundOverlapLayer=this.tilemap.createLayer("Ground_overlap"),this.collideLayer=this.tilemap.createLayer("Collide"),this.tilemap.currentLayer=3,this.tilemap.setCollisionBetween(1,1e4,!0,this.collideLayer)}return o(t,[{key:"renderLastLayer",value:function(){this.passLayer=this.tilemap.createLayer("Pass"),this.groundLayer.resizeWorld(),this.groundOverlapLayer.resizeWorld(),this.collideLayer.resizeWorld(),this.passLayer.resizeWorld()}},{key:"addMapTransition",value:function(t,e,a,i,r){this.tilemap.setTileLocationCallback(t,e,a,i,r,this,this.groundLayer)}}]),t}());a["default"]=u},{"../core/Globals":3,"../core/Utils":5,config:1}],9:[function(t,e,a){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e["default"]=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=t("../states"),s=i(n),l=function(){function t(){var e=this;r(this,t);var a={w:980,h:470};localStorage.getItem("NWarriorToken")||window.location.assign("/"),this.game=new Phaser.Game(a.w,a.h,Phaser.AUTO,"phaser"),Object.keys(s).forEach(function(t){return e.game.state.add(t,s[t])}),this.game.state.start("Boot"),this.uiStyle()}return o(t,[{key:"uiStyle",value:function(){$(".ui-style").each(function(){$(this).append('<div class="ui-style__left-border"></div><div class="ui-style__right-border"></div><div class="ui-style__top-border"></div><div class="ui-style__bottom-border"></div><div class="ui-style__top-left-corner"></div><div class="ui-style__top-right-corner"></div><div class="ui-style__bottom-left-corner"></div><div class="ui-style__bottom-right-corner"></div>')})}}]),t}();a["default"]=l},{"../states":24}],10:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=t("core/Home"),n=i(o),s=function l(){r(this,l),new n["default"]};$(document).ready(function(){new s})},{"core/Home":4}],11:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=t("../core/Globals"),u=i(l),c=t("../core/Utils"),h=i(c),f=t("config"),p=i(f),d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"preload",value:function(){this.setLoader(),this.game.load.spritesheet("SwordsMan","img/classes/swordman_walk.png",32,32),this.game.load.spritesheet("SwordsMan_attack","img/classes/swordman_attack.png",64,64),this.game.load.spritesheet("SwordsMan_sleep","img/classes/swordman_sleep.png",64,64),this.game.load.spritesheet("SwordsMan_dead","img/classes/swordman_dead.png",64,64),this.game.load.spritesheet("Archer","img/classes/archer_walk.png",32,32),this.game.load.spritesheet("Archer_attack","img/classes/archer_attack.png",64,64),this.game.load.spritesheet("Archer_sleep","img/classes/archer_sleep.png",64,64),this.game.load.spritesheet("Archer_dead","img/classes/archer_dead.png",64,64),this.game.load.spritesheet("Mage","img/classes/mage_walk.png",32,32),this.game.load.spritesheet("Mage_sleep","img/classes/mage_sleep.png",64,64),this.game.load.spritesheet(u["default"].ENEMIES.SLIME,"img/enemies/slime-2.png",32,32),this.game.load.spritesheet(u["default"].ENEMIES.MUSHROOM,"img/enemies/mushroom-2.png",32,32),this.game.load.tilemap(u["default"].MAPS.FOREST_TOP_LEFT,"tiles/forest_top_left.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_TOP_MIDDLE,"tiles/forest_top_middle.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_TOP_RIGHT,"tiles/forest_top_right.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_MIDDLE_LEFT,"tiles/forest_middle_left.json",null,Phaser.Tilemap.TILED_JSON),
this.game.load.tilemap(u["default"].MAPS.FOREST_MIDDLE_RIGHT,"tiles/forest_middle_right.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_BOTTOM_LEFT,"tiles/forest_bottom_left.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_BOTTOM_MIDDLE,"tiles/forest_bottom_middle.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.FOREST_BOTTOM_RIGHT,"tiles/forest_bottom_right.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.USELESS_CITY,"tiles/useless_city.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap(u["default"].MAPS.HOUSE_01,"tiles/house_01.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.image("sprites_background_32x32_v3","tiles/sprites_background_32x32_v3.png"),this.game.load.image("arrow","img/classes/arrow.png"),this.game.load.audio("SadDescent","audio/SadDescent.ogg"),this.game.load.audio("SadTown","audio/SadTown.ogg")}},{key:"create",value:function(){this.getCharacterInfo()}},{key:"setLoader",value:function(){this.loading=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"Loading...",u["default"].TEXT_STYLES.LOADING),this.loading.anchor.setTo(.5)}},{key:"getCharacterInfo",value:function(){var t=this,e=localStorage.getItem("NWarriorCharID"),a=p["default"].apiURL+"characters/"+e,i={};i.token=localStorage.getItem("NWarriorToken"),$.ajax({type:"get",url:a,data:i,success:function(e){e.classNumber=e.characterClass,e.characterClass=h["default"].formatClass(e.characterClass);var a=e.lastMap||"UselessCity",i={characterData:e,previousMap:!1};t.game.state.start(h["default"].humanize(a),!0,!1,i)}})}}]),e}(Phaser.State);a["default"]=d},{"../core/Globals":3,"../core/Utils":5,config:1}],12:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.mapName=c["default"].MAPS.FOREST_BOTTOM_LEFT,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(21,0,18,1,function(){t.changeMap("ForestMiddleLeft",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(39,4,1,35,function(){t.changeMap("ForestBottomMiddle",c["default"].DIRECTIONS.LEFT)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],13:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){return this.mapName=c["default"].MAPS.FOREST_BOTTOM_MIDDLE,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(39,3,1,35,function(){t.changeMap("ForestBottomRight",c["default"].DIRECTIONS.LEFT)},this),this.map.addMapTransition(0,3,1,35,function(){t.changeMap("ForestBottomLeft",c["default"].DIRECTIONS.RIGHT)},this),this.map.addMapTransition(19,2,2,1,function(){t.changeMap("UselessCity",c["default"].DIRECTIONS.DOWN)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],14:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){return this.mapName=c["default"].MAPS.FOREST_BOTTOM_RIGHT,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(1,0,38,1,function(){t.changeMap("ForestMiddleRight",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(0,4,1,35,function(){t.changeMap("ForestBottomMiddle",c["default"].DIRECTIONS.RIGHT)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],15:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.mapName=c["default"].MAPS.FOREST_MIDDLE_LEFT,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(21,0,18,1,function(){t.changeMap("ForestTopLeft",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(21,39,18,1,function(){t.changeMap("ForestBottomLeft",c["default"].DIRECTIONS.UP)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],16:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){return this.mapName=c["default"].MAPS.FOREST_MIDDLE_RIGHT,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(1,0,38,1,function(){t.changeMap("ForestTopRight",c["default"].DIRECTIONS.DOWN)},this),this.map.addMapTransition(1,39,38,1,function(){t.changeMap("ForestBottomRight",c["default"].DIRECTIONS.UP)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],17:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){return this.mapName=c["default"].MAPS.FOREST_TOP_LEFT,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"create",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(39,4,1,35,function(){t.changeMap("ForestTopMiddle",c["default"].DIRECTIONS.LEFT)},this),this.map.addMapTransition(21,39,18,1,function(){t.changeMap("ForestMiddleLeft",c["default"].DIRECTIONS.UP)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],18:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function y(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:y(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=t("../game/Dialog"),d=(i(p),function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.mapName=c["default"].MAPS.FOREST_TOP_MIDDLE,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"create",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this)}},{key:"getPlayerPosition",value:function(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getPlayerPosition",this).call(this)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(39,4,1,35,function(){t.changeMap("ForestTopRight",c["default"].DIRECTIONS.LEFT)},this),this.map.addMapTransition(0,4,1,35,function(){t.changeMap("ForestTopLeft",c["default"].DIRECTIONS.RIGHT)},this)}}]),e}(f["default"]));a["default"]=d},{"../core/Globals":3,"../game/Dialog":7,"./MapState":22}],19:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){return this.mapName=c["default"].MAPS.FOREST_TOP_RIGHT,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(0,4,1,35,function(){t.changeMap("ForestTopMiddle",c["default"].DIRECTIONS.RIGHT)},this),this.map.addMapTransition(1,39,38,1,function(){t.changeMap("ForestMiddleRight",c["default"].DIRECTIONS.UP)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],20:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.mapName=c["default"].MAPS.HOUSE_01,this.isHouse=!0,this.isCity=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(4,7,1,1,function(){t.changeMap("UselessCity",c["default"].DIRECTIONS.DOWN,0)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],21:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.mapName=c["default"].MAPS.HOUSE_02,this.isHouse=!0,this.isCity=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],22:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=t("../core/Globals"),u=i(l),c=t("config"),h=(i(c),t("../game/Character")),f=i(h),p=t("../game/Map"),d=i(p),y=t("../game/Dialog"),m=i(y),g=t("../core/Utils"),v=i(g),b=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.player=null,$(window).unbind("keydown"),this.isCity?(this.music=this.game.add.audio(u["default"].MUSICS.SAD_TOWN),this.music.loop=!0):(this.enemies=[],this.music=this.game.add.audio(u["default"].MUSICS.SAD_DESCENT),this.music.loop=!0),this.options=t,this.$overlayDead=$(".game__wrapper__overlay--grey"),this.$overlayDead.removeClass("active"),this.$saveText=$(".game-menu__message"),this.$saveBtn=$(".game-menu__save-btn"),this.$autoSaveCheckbox=$(".game__option--autosave"),this.autoSave="true"===localStorage.getItem("NWarriorAutoSave"),this.musicOn="true"===localStorage.getItem("NWarriorMusicOn"),this.$musicCheckbox=$(".game__option--music"),this.deadDialog=!1,this.autoSave&&this.$autoSaveCheckbox.prop("checked",!0),this.musicOn?(this.$musicCheckbox.prop("checked",!0),this.music&&(this.music.volume=.3,this.music.play())):this.$musicCheckbox.prop("checked",!1),this.options.previousMap?this.shouldChangeMap=!1:this.shouldChangeMap=!0,this.playerPositionThreshold=32,this.$gameTimeHours=$(".game__time-hours"),this.$gameTimeMinutes=$(".game__time-minutes"),this.$gameTimeType=$(".game__time-type"),this.$overlayNight=$(".game__wrapper__overlay--night")}},{key:"create",value:function(){var t=this;this.debug=!1,this.game.time.advancedTiming=!0,this.map=new d["default"](this.game,{map:this.mapName,isHouse:this.isHouse,isCity:this.isCity}),this.playerPosition=this.getPlayerPosition(),this.playerFirstPosition=this.playerPosition,this.player=new f["default"](this.game,this.options.characterData,u["default"].PLAYER,this.playerPosition.x,this.playerPosition.y,this.map),this.handleTime(),this.options.previousMap&&this.player.turnSprite(this.playerInitialDirection),this.isCity||(this.enemies.push(new f["default"](this.game,{characterClass:u["default"].ENEMIES.SLIME,isHostile:!0,health:70,currentHealth:70,strength:5,dexterity:5},u["default"].ENEMY,450,450,this.map)),this.enemies.push(new f["default"](this.game,{characterClass:u["default"].ENEMIES.MUSHROOM,isHostile:!0,health:70,currentHealth:70,strength:5,dexterity:5},u["default"].ENEMY,150,150,this.map)),this.enemies.push(new f["default"](this.game,{characterClass:u["default"].ENEMIES.SLIME,isHostile:!0,health:70,currentHealth:70,strength:5,dexterity:5},u["default"].ENEMY,450,950,this.map)),this.enemies.push(new f["default"](this.game,{characterClass:u["default"].ENEMIES.MUSHROOM,isHostile:!0,health:70,currentHealth:70,strength:5,dexterity:5},u["default"].ENEMY,550,350,this.map))),this.map.renderLastLayer(),this.addMapTransitions(),this.bind(),this.player.firstDialog||this.welcomeDone||(this.welcome=new m["default"]({lines:["Welcome to the ruthless, desolated and cute world of <strong>Nameless Warrior Beta</strong>!","If you have any suggestions or want to report any bug, please send me an email :D (andresan2006@gmail.com)","Go to the <strong>Status</strong> menu to see your character status. Go to <strong>Help</strong> to see the keyboard controls and the description of the status"]},function(){t.welcomeDone=!0,t.player.firstDialog=!0}))}},{key:"update",value:function(){var t=this;if(!this.isCity)if(this.player.characterClass===u["default"].ARCHER){var e=function(e){null!==t.player.arrows[e]&&t.game.physics.arcade.collide(t.player.arrows[e].object,t.enemies,function(a,i){a="arrow"===a.key?t.player:a,t.player.arrows[e].object.destroy(),t.player.arrows[e].destroyed=!0,t.collisionHandler(a,i)})};for(var a in this.player.arrows)e(a)}else this.game.physics.arcade.collide(this.player,this.enemies,this.collisionHandler);if(this.options.previousMap&&this.checkShouldChangeMap(),this.player&&(this.game.physics.arcade.collide(this.player,this.map.collideLayer),this.game.physics.arcade.collide(this.player,this.map.groundLayer)),this.enemies)for(var i in this.enemies)this.enemies[i].alive&&(this.game.physics.arcade.collide(this.enemies[i],this.map.collideLayer),this.enemies[i].checkPlayerPosition(this.player));if(!this.deadDialog&&!this.player.alive){if(this.$overlayDead.addClass("active"),this.enemies)for(var r in this.enemies)clearInterval(this.enemies[r].randomWalkInterval),this.enemies[r].kill();this.deadDialog=new m["default"]({lines:["You are dead! Like everything else in your life, you have failed!"]},function(){t.player.currentHealth=t.player.health,t.player.saveCharacterStatus(),setTimeout(function(){t.changeMap("UselessCity",u["default"].DIRECTIONS.DOWN)},1e3)})}}},{key:"render",value:function(){if(this.game.debug.text("fps: "+this.game.time.fps||"--",35,20,"#fff"),this.player&&this.debug&&(this.game.debug.bodyInfo(this.player,32,32),this.game.debug.body(this.player)),this.enemies&&this.debug)for(var t in this.enemies){var e=this.enemies[t];this.game.debug.body(e)}}},{key:"getPlayerPosition",value:function(){if(!this.options.previousMap)return 0!==this.options.characterData.lastPositionX?{x:this.options.characterData.lastPositionX-32,y:this.options.characterData.lastPositionY}:{x:300,y:300};var t=0;switch(this.options.firstPositionThreshold&&(t+=this.options.firstPositionThreshold),this.options.enterPosition){case u["default"].DIRECTIONS.UP:return this.playerInitialDirection=u["default"].DIRECTIONS.UP,{x:this.options.playerLastPosition.x+16,y:t};case u["default"].DIRECTIONS.DOWN:return this.playerInitialDirection=u["default"].DIRECTIONS.DOWN,{x:this.options.playerLastPosition.x+16,y:this.map.tilemap.heightInPixels-32+t};case u["default"].DIRECTIONS.LEFT:return this.playerInitialDirection=u["default"].DIRECTIONS.RIGHT,{x:t,y:this.options.playerLastPosition.y+16};case u["default"].DIRECTIONS.RIGHT:return this.playerInitialDirection=u["default"].DIRECTIONS.LEFT,{x:this.map.tilemap.widthInPixels-32+t,y:this.options.playerLastPosition.y+16}}}},{key:"collisionHandler",value:function(t,e){(t.attacking||t.characterClass===u["default"].ARCHER)&&e.receiveAttack(t)}},{key:"bind",value:function(){var t=this;this.saveLocationInterval=setInterval(function(){t.autoSave&&(t.player.saveCharacterStatus(t.mapName),t.$saveText.removeClass("hide"),setTimeout(function(){t.$saveText.addClass("hide")},3e3))},1e4),this.$saveBtn.click(function(){t.player.saveCharacterStatus(t.mapName),t.$saveText.removeClass("hide"),setTimeout(function(){t.$saveText.addClass("hide")},3e3)}),this.$autoSaveCheckbox.change(function(e){t.$autoSaveCheckbox.is(":checked")?(t.autoSave=!0,localStorage.setItem("NWarriorAutoSave",!0)):(t.autoSave=!1,localStorage.setItem("NWarriorAutoSave",!1))}),this.$musicCheckbox.change(function(e){t.$musicCheckbox.is(":checked")?(t.musicOn=!0,localStorage.setItem("NWarriorMusicOn",!0),t.music&&t.music.play()):(t.musicOn=!1,localStorage.setItem("NWarriorMusicOn",!1),t.music&&t.music.stop())}),this.timeInverval=setInterval(function(){t.handleTime()},5e3)}},{key:"checkShouldChangeMap",value:function(){var t={x:this.player.body.x,y:this.player.body.y};switch(this.options.enterPosition){case u["default"].DIRECTIONS.UP:this.playerFirstPosition.y+this.playerPositionThreshold<=t.y&&(this.shouldChangeMap=!0);break;case u["default"].DIRECTIONS.DOWN:this.playerFirstPosition.y-this.playerPositionThreshold>=t.y&&(this.shouldChangeMap=!0);break;case u["default"].DIRECTIONS.LEFT:this.playerFirstPosition.x+this.playerPositionThreshold<=t.x&&(this.shouldChangeMap=!0);break;case u["default"].DIRECTIONS.RIGHT:this.playerFirstPosition.x-this.playerPositionThreshold>=t.x&&(this.shouldChangeMap=!0)}}},{key:"addMapTransitions",value:function(){this.willChangeMap=!1}},{key:"changeMap",value:function(t,e,a){var i=this;if(this.shouldChangeMap){this.player.saveCharacterStatus(),this.music&&(this.music.stop(),this.music=null),clearInterval(this.saveLocationInterval),clearInterval(this.saveStatusInterval),clearInterval(this.timeInverval);for(var r in this.enemies)clearInterval(this.enemies[r].randomWalkInterval);var o={x:this.player.body.x,y:this.player.body.y};this.willChangeMap||!function(){i.willChangeMap=!0;var r={characterData:i.options.characterData,previousMap:i.mapName,previousMapMusic:i.music,enterPosition:e,playerLastPosition:o,firstPositionThreshold:a};setTimeout(function(){i.game.state.start(t,!0,!1,r)},100)}()}}},{key:"handleTime",value:function(){var t=v["default"].addZero(this.player.gameTimeHours),e=v["default"].addZero(this.player.gameTimeMinutes),a=new Date;a.setUTCHours(t),a.setUTCMinutes(e),a.setUTCMinutes(a.getUTCMinutes()+5),this.player.gameTimeHours=v["default"].addZero(a.getUTCHours()),this.player.gameTimeMinutes=v["default"].addZero(a.getUTCMinutes()),this.$gameTimeHours.html(this.player.gameTimeHours),this.$gameTimeMinutes.html(this.player.gameTimeMinutes),this.$gameTimeType.html(this.player.gameTimeHours>=12?"PM":"AM"),
this.setNightOverlay(this.player.gameTimeHours)}},{key:"setNightOverlay",value:function(t){if(t>=19||t<=6){this.$overlayNight.addClass("active");t>=19&&t<=21?this.$overlayNight.css("opacity",.45):22==t||23==t||t>=0&&t<=4?this.$overlayNight.css("opacity",.55):5!=t&&6!=t||this.$overlayNight.css("opacity",.35)}else this.$overlayNight.removeClass("active")}}]),e}(Phaser.State);a["default"]=b},{"../core/Globals":3,"../core/Utils":5,"../game/Character":6,"../game/Dialog":7,"../game/Map":8,config:1}],23:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=function d(t,e,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=t("../core/Globals"),c=i(u),h=t("./MapState"),f=i(h),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),s(e,[{key:"init",value:function(t){this.mapName=c["default"].MAPS.USELESS_CITY,this.isCity=!0,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t)}},{key:"addMapTransitions",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addMapTransitions",this).call(this),this.map.addMapTransition(19,39,4,1,function(){t.changeMap("ForestBottomMiddle",c["default"].DIRECTIONS.UP,96)},this),this.map.addMapTransition(14,27,1,1,function(){t.changeMap("House01",c["default"].DIRECTIONS.DOWN,96)},this)}}]),e}(f["default"]);a["default"]=p},{"../core/Globals":3,"./MapState":22}],24:[function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(a,"__esModule",{value:!0});var r=t("./Boot");Object.defineProperty(a,"Boot",{enumerable:!0,get:function(){return i(r)["default"]}});var o=t("./ForestTopLeft");Object.defineProperty(a,"ForestTopLeft",{enumerable:!0,get:function(){return i(o)["default"]}});var n=t("./ForestTopMiddle");Object.defineProperty(a,"ForestTopMiddle",{enumerable:!0,get:function(){return i(n)["default"]}});var s=t("./ForestTopRight");Object.defineProperty(a,"ForestTopRight",{enumerable:!0,get:function(){return i(s)["default"]}});var l=t("./ForestMiddleLeft");Object.defineProperty(a,"ForestMiddleLeft",{enumerable:!0,get:function(){return i(l)["default"]}});var u=t("./ForestMiddleRight");Object.defineProperty(a,"ForestMiddleRight",{enumerable:!0,get:function(){return i(u)["default"]}});var c=t("./ForestBottomLeft");Object.defineProperty(a,"ForestBottomLeft",{enumerable:!0,get:function(){return i(c)["default"]}});var h=t("./ForestBottomMiddle");Object.defineProperty(a,"ForestBottomMiddle",{enumerable:!0,get:function(){return i(h)["default"]}});var f=t("./ForestBottomRight");Object.defineProperty(a,"ForestBottomRight",{enumerable:!0,get:function(){return i(f)["default"]}});var p=t("./UselessCity");Object.defineProperty(a,"UselessCity",{enumerable:!0,get:function(){return i(p)["default"]}});var d=t("./House01");Object.defineProperty(a,"House01",{enumerable:!0,get:function(){return i(d)["default"]}});var y=t("./House02");Object.defineProperty(a,"House02",{enumerable:!0,get:function(){return i(y)["default"]}})},{"./Boot":11,"./ForestBottomLeft":12,"./ForestBottomMiddle":13,"./ForestBottomRight":14,"./ForestMiddleLeft":15,"./ForestMiddleRight":16,"./ForestTopLeft":17,"./ForestTopMiddle":18,"./ForestTopRight":19,"./House01":20,"./House02":21,"./UselessCity":23}]},{},[10]);