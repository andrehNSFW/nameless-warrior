Boxes=function(t,a){this.trigger=t,this.target=a,this.overlayAlways=$("body").data("overlay")||!1,this.bindEvents()},Boxes.prototype={bindEvents:function(){var t=this,a=$(this.trigger),e=$(".overlay");a.each(function(){var a=$(this).data("target"),s=$(a);$(this).click(function(a){a.preventDefault(),t.overlayAlways||(e.addClass("active"),e.click(function(){e.removeClass("active"),s.removeClass("active")})),t.closeAll(),s.addClass("active")})})},closeAll:function(){var t=$(".formbox");t.each(function(){$(this).removeClass("active")})}},Forms=function(){this.apiURL="api/",this.selector="form",this.bindEvents()},Forms.prototype={bindEvents:function(){var t=this,a=$(this.selector);a.each(function(){var a=$(this);formAction=a.data("action"),formTarget=a.data("target"),params=new Object,id=a.attr("id"),result=a.find(".formbox__result"),data={},"signup"==formAction&&t.checkPass(a.find("[name=password]"),a.find("[name=repeat-password]")),a.submit(function(a){a.preventDefault(),data=$(this).serializeArray(),data.push({name:"action",value:formAction}),data.push({name:"target",value:formTarget}),console.log(data),t.ajaxCall(result,data)})})},ajaxCall:function(t,a){var e=this,s=(new XMLHttpRequest,$(".loader"));s.addClass("active"),$.ajax({type:"POST",url:e.apiURL,data:a,success:function(a){s.removeClass("active"),e.handleReturn(a,t)}})},handleReturn:function(t,a){JSON.parse(t);a.html(t.message),console.log(a)},login:function(){},checkPass:function(t,a){}},function(){new Boxes(".open-formbox",".formbox"),new Forms}();