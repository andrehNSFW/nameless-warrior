var NWarrior=NWarrior||{};NWarrior.Character=function(r){this["class"],this.nickname,this.str,this.con,this.dex,this["int"],this.cha,this.hp,this.mana,this.stamina,this.hunger,this.sleep,Phaser.Sprite.call(this,r,r.world.randomX,r.world.randomY,"player"),this.create()},NWarrior.Character.prototype=Object.create(Phaser.Sprite.prototype),NWarrior.Character.prototype.constructor=NWarrior.Character,NWarrior.Character.prototype.create=function(){this.game.add.existing(this),this.frame=1,this.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.game.camera.follow(this),this.cursors=this.game.input.keyboard.createCursorKeys(),gameUtils.walkAnimations(this)},NWarrior.Character.prototype.update=function(){gameUtils.walkCursors(this.cursors,this)};var NWarrior=NWarrior||{};NWarrior.Enemy=function(r){this.type,this.str,this.con,this.dex,this["int"],this.cha,this.hp,this.mana,this.stamina,this.hunger,this.sleep,Phaser.Sprite.call(this,r,r.world.randomX,r.world.randomY,"Enemy"),this.create()},NWarrior.Enemy.prototype=Object.create(Phaser.Sprite.prototype),NWarrior.Enemy.prototype.constructor=NWarrior.Enemy,NWarrior.Enemy.prototype.create=function(){};var gameUtils={walkAnimations:function(r){r.animations.add("down",[1,0,2],10,!0),r.animations.add("left",[4,3,5],10,!0),r.animations.add("right",[7,6,8],10,!0),r.animations.add("up",[10,9,11],10,!0)},walk:function(r,t,a){switch(a=a||50,r){case"down":this.lastFrame=1,t.body.velocity.y=a,t.body.velocity.x=0;break;case"up":this.lastFrame=10,t.body.velocity.y=-a,t.body.velocity.x=0;break;case"left":this.lastFrame=4,t.body.velocity.x=-a,t.body.velocity.y=0;break;case"right":this.lastFrame=7,t.body.velocity.y=0,t.body.velocity.x=a;break;case"stop":t.body.velocity.x=0,t.body.velocity.y=0,t.animations.stop()}t.animations.play(r)},walkCursors:function(r,t,a){var i;a=a||150,i=r.left.isDown?"left":r.right.isDown?"right":r.up.isDown?"up":r.down.isDown?"down":"stop",this.walk(i,t,a)},randomWalk:function(r,t){var a=this,t=t||150;setInterval(function(){var i=Math.floor(5*Math.random())+1;switch(i){case 1:a.walk("down",r,t);break;case 2:a.walk("up",r,t);break;case 3:a.walk("left",r,t);break;case 4:a.walk("right",r,t);break;case 5:a.walk("stop",r,t)}},1e3)}},NWarrior=NWarrior||{};NWarrior.Hud=function(r){this.game=r,this.create()},NWarrior.Hud.prototype={create:function(){var r={x:140,y:30,height:20,bar:{color:"#940000"},bg:{color:"#000000"}},t={x:140,y:60,height:20,bar:{color:"#5368EE"},bg:{color:"#000000"}};this.healthBar=new HealthBar(this.game,r),this.manaBar=new HealthBar(this.game,t)},turnAudio:function(r){1==this.music.mute?this.music.mute=!1:this.music.mute=!0}};var NWarrior=NWarrior||{};NWarrior.Map=function(r){this.game=r,this.create()},NWarrior.Map.prototype={create:function(){this.map=this.game.add.tilemap("sampleMap");var r=this.map.widthInPixels,t=this.map.heightInPixels;this.game.world.setBounds(0,0,r,t),this.map.addTilesetImage("TileCraftGroundSet","tiles"),this.ground=this.map.createLayer("layer1"),this.ground.resizeWorld()}};var NWarrior=NWarrior||{};NWarrior.Npc=function(r){this.type,this.str,this.con,this.dex,this["int"],this.cha,this.hp,this.mana,this.stamina,this.hunger,this.sleep,Phaser.Sprite.call(this,r,r.world.randomX,r.world.randomY,"npc"),this.create()},NWarrior.Npc.prototype=Object.create(Phaser.Sprite.prototype),NWarrior.Npc.prototype.constructor=NWarrior.Character,NWarrior.Npc.prototype.create=function(){this.game.add.existing(this),this.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.frame=4,this.enableBody=!0,gameUtils.walkAnimations(this),gameUtils.randomWalk(this,50)},NWarrior.Npc.prototype.update=function(){};var NWarrior=NWarrior||{};NWarrior.Boot=function(){},NWarrior.Boot.prototype={preload:function(){this.loadingStyle={font:"18px Helvetica",fill:"#fff"},this.loading=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"Carregando...",this.loadingStyle),this.loading.anchor.setTo(.5),this.game.load.spritesheet("player","img/char2.png",31,32),this.game.load.spritesheet("npc","img/char3.png",31,32),this.game.load.tilemap("sampleMap","tiles/sample_map2.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.image("tiles","tiles/TileCraftGroundSet.png"),this.game.load.audio("backgroundMusic","audio/RetroMystic.ogg"),this.game.load.image("settings","img/wrench.png"),this.game.load.image("audio","img/audioOn.png")},create:function(){NWarrior.game.state.start("Game")}};var NWarrior=NWarrior||{};NWarrior.Game=function(){this.npcsNumber=10},NWarrior.Game.prototype={create:function(){this.game.time.advancedTiming=!0,this.game.stage.backgroundColor="#00CC66",this.player=new NWarrior.Character(this.game),this.npcs=[],this.npcsGroup=this.game.add.group();for(var r=0;r<this.npcsNumber;r++)this.npcs[r]=new NWarrior.Npc(this.game),this.npcsGroup.add(this.npcs[r]);this.hud=new NWarrior.Hud(this.game)},update:function(){this.game.physics.arcade.collide(this.player,this.npcsGroup)},render:function(){this.game.debug.text(this.game.time.fps||"--",10,650,"#000")}};var NWarrior=NWarrior||{},gameWidth=$(".game__wrapper").width(),gameHeight=window.innerHeight;NWarrior.game=new Phaser.Game(gameWidth,gameHeight,Phaser.AUTO,"phaser"),NWarrior.game.state.add("Boot",NWarrior.Boot),NWarrior.game.state.add("Game",NWarrior.Game),NWarrior.game.state.start("Boot");