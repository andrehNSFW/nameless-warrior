var NWarrior=NWarrior||{};NWarrior.Character=function(t){this["class"],this.nickname,this.str,this.con,this.dex,this["int"],this.cha,this.hp,this.mana,this.stamina,this.hunger,this.sleep,Phaser.Sprite.call(this,t,t.world.randomX,t.world.randomY,"player"),this.create()},NWarrior.Character.prototype=Object.create(Phaser.Sprite.prototype),NWarrior.Character.prototype.constructor=NWarrior.Character,NWarrior.Character.prototype.create=function(){this.game.add.existing(this),this.frame=1,this.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.game.camera.follow(this),this.cursors=this.game.input.keyboard.createCursorKeys(),utils.walkAnimations(this)},NWarrior.Character.prototype.update=function(){utils.walkCursors(this.cursors,this)};var NWarrior=NWarrior||{};NWarrior.Enemy=function(t){this.type,this.str,this.con,this.dex,this["int"],this.cha,this.hp,this.mana,this.stamina,this.hunger,this.sleep,Phaser.Sprite.call(this,t,t.world.randomX,t.world.randomY,"Enemy"),this.create()},NWarrior.Enemy.prototype=Object.create(Phaser.Sprite.prototype),NWarrior.Enemy.prototype.constructor=NWarrior.Enemy,NWarrior.Enemy.prototype.create=function(){};var NWarrior=NWarrior||{};NWarrior.Hud=function(t){this.game=t,this.create()},NWarrior.Hud.prototype={create:function(){var t={font:"18px Helvetica",fill:"#fff",tabs:60};text=this.game.add.text(10,10,"Vida:\tMana:",t),text2=this.game.add.text(10,30,"100\t50",t),text.fixedToCamera=!0,text2.fixedToCamera=!0;var a=this.game.add.sprite(720,10,"audio");a.fixedToCamera=!0,a.scale.setTo(.7,.7),a.inputEnabled=!0,a.events.onInputDown.add(this.turnAudio,this)},turnAudio:function(t){1==this.music.mute?this.music.mute=!1:this.music.mute=!0}};var NWarrior=NWarrior||{};NWarrior.Map=function(t){this.game=t,this.create()},NWarrior.Map.prototype={create:function(){this.map=this.game.add.tilemap("sampleMap");var t=this.map.widthInPixels,a=this.map.heightInPixels;this.game.world.setBounds(0,0,t,a),this.map.addTilesetImage("TileCraftGroundSet","tiles"),this.ground=this.map.createLayer("layer1"),this.ground.resizeWorld()}};var NWarrior=NWarrior||{};NWarrior.Npc=function(t){this.type,this.str,this.con,this.dex,this["int"],this.cha,this.hp,this.mana,this.stamina,this.hunger,this.sleep,Phaser.Sprite.call(this,t,t.world.randomX,t.world.randomY,"npc"),this.create()},NWarrior.Npc.prototype=Object.create(Phaser.Sprite.prototype),NWarrior.Npc.prototype.constructor=NWarrior.Character,NWarrior.Npc.prototype.create=function(){this.game.add.existing(this),this.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.frame=4,this.enableBody=!0,utils.walkAnimations(this),utils.randomWalk(this,50)},NWarrior.Npc.prototype.update=function(){};var utils={walkAnimations:function(t){t.animations.add("down",[1,0,2],10,!0),t.animations.add("left",[4,3,5],10,!0),t.animations.add("right",[7,6,8],10,!0),t.animations.add("up",[10,9,11],10,!0)},walk:function(t,a,r){switch(r=r||50,t){case"down":this.lastFrame=1,a.body.velocity.y=r,a.body.velocity.x=0;break;case"up":this.lastFrame=10,a.body.velocity.y=-r,a.body.velocity.x=0;break;case"left":this.lastFrame=4,a.body.velocity.x=-r,a.body.velocity.y=0;break;case"right":this.lastFrame=7,a.body.velocity.y=0,a.body.velocity.x=r;break;case"stop":a.body.velocity.x=0,a.body.velocity.y=0,a.animations.stop()}a.animations.play(t)},walkCursors:function(t,a,r){r=r||150,t.left.isDown?this.walk("left",a,r):t.right.isDown?this.walk("right",a,r):t.up.isDown?this.walk("up",a,r):t.down.isDown?this.walk("down",a,r):this.walk("stop",a,r)},randomWalk:function(t,a){var r=this,a=a||150;setInterval(function(){var i=Math.floor(5*Math.random())+1;switch(i){case 1:r.walk("down",t,a);break;case 2:r.walk("up",t,a);break;case 3:r.walk("left",t,a);break;case 4:r.walk("right",t,a);break;case 5:r.walk("stop",t,a)}},1e3)}},NWarrior=NWarrior||{};NWarrior.Boot=function(){},NWarrior.Boot.prototype={preload:function(){this.loadingStyle={font:"18px Helvetica",fill:"#fff"},this.loading=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"Carregando...",this.loadingStyle),this.loading.anchor.setTo(.5),this.game.load.spritesheet("player","img/char2.png",31,32),this.game.load.spritesheet("npc","img/char3.png",31,32),this.game.load.tilemap("sampleMap","tiles/sample_map2.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.image("tiles","tiles/TileCraftGroundSet.png"),this.game.load.audio("backgroundMusic","audio/RetroMystic.ogg"),this.game.load.image("settings","img/wrench.png"),this.game.load.image("audio","img/audioOn.png")},create:function(){NWarrior.game.state.start("Game")}};var NWarrior=NWarrior||{};NWarrior.Game=function(){this.npcsNumber=20},NWarrior.Game.prototype={create:function(){this.game.time.advancedTiming=!0,this.map=new NWarrior.Map(this.game),this.player=new NWarrior.Character(this.game),this.npcs=[],this.npcsGroup=this.game.add.group();for(var t=0;t<this.npcsNumber;t++)this.npcs[t]=new NWarrior.Npc(this.game),this.npcsGroup.add(this.npcs[t]);console.log(this.npcs),this.hud=new NWarrior.Hud(this.game)},update:function(){this.game.physics.arcade.collide(this.player,this.npcsGroup)},render:function(){this.game.debug.text(this.game.time.fps||"--",10,430,"#000")}};var NWarrior=NWarrior||{};NWarrior.game=new Phaser.Game(768,448,Phaser.AUTO,"phaser"),NWarrior.game.state.add("Boot",NWarrior.Boot),NWarrior.game.state.add("Game",NWarrior.Game),NWarrior.game.state.start("Boot");